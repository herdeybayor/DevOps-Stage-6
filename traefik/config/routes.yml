http:
  routers:
    # Auth API Router - Priority 10 (high)
    auth-api:
      rule: "Host(`stage6.hng.codeforgex.dev`) && PathPrefix(`/login/`)"
      service: auth-api
      entryPoints:
        - https
      priority: 10
      tls:
        certResolver: letsencrypt

    # Todos API Router - Priority 10 (high)
    todos-api:
      rule: "Host(`stage6.hng.codeforgex.dev`) && PathPrefix(`/todos/`)"
      service: todos-api
      entryPoints:
        - https
      priority: 10
      tls:
        certResolver: letsencrypt

    # Users API Router - Priority 10 (high)
    users-api:
      rule: "Host(`stage6.hng.codeforgex.dev`) && PathPrefix(`/users/`)"
      service: users-api
      entryPoints:
        - https
      priority: 10
      tls:
        certResolver: letsencrypt

    # Frontend Router - Priority 1 (low, catch-all)
    frontend:
      rule: "Host(`stage6.hng.codeforgex.dev`) && Path(`/`)"
      service: frontend
      entryPoints:
        - https
      priority: 1
      tls:
        certResolver: letsencrypt

  services:
    # Auth API Service
    auth-api:
      loadBalancer:
        servers:
          - url: "http://auth-api:8000"

    # Todos API Service
    todos-api:
      loadBalancer:
        servers:
          - url: "http://todos-api:8082"

    # Users API Service
    users-api:
      loadBalancer:
        servers:
          - url: "http://users-api:8083"

    # Frontend Service
    frontend:
      loadBalancer:
        servers:
          - url: "http://frontend:80"
